---
title: API
sidebar_position: 3
---

import {IfcCard} from "../../../src/components/Card/InfoCard";
import {IfcAlert} from "../../../src/components/Alert/Alert";

##  The list of awesome things you can do with web-ifc-three

  üìÉ
All APIs are documented, so when you use any of the objects or methods seen in this documentation, you should see help in Intellisense, regardless of the IDE you are using. [Check it out!](https://github.com/IFCjs/web-ifc-three/blob/main/src/IFC/Components/IFCManager.ts)

  üë©‚Äçüè´
However, we realise that reading intellisense or comments is not the most comfortable thing to do, so on this page we will make an overview of what the API can do. Everything will be covered in more detail in specific tutorials later on.

##  IfcLoader

  üíé
The only object we will import from the library. It contains all the logic needed to work with IFC. You can use its `load()` and `loadAsync()` methods to load IFCs from a URL, [just like any other Three.js Loader](https://threejs.org/docs/#api/en/loaders/Loader.load). For example, to load an IFC we can do the following:

```js
import { IFCLoader } from "web-ifc-three/IFCLoader";

const ifcLoader = new IFCLoader();
ifcLoader.load(
    "models/Example_model.ifc",
    (ifcModel) => scene.add(ifcModel.mesh));
```

  üè†üè†üè†
With `web-ifc-three` you can load multiple models in the scene. Many of the API operations are executed on a specified model. To express on which model we want to operate we have to give its `ModelID`.

  üîç
You can get the ID of a model through the property `modelID` of the generated meshes. We add this property to [Three.js default mesh](https://threejs.org/docs/#api/en/objects/Mesh).

```js
const modelID = ifcModel.mesh.modelID;
```

  ‚úå
There are two ways to access the API:

- Through the instances of `IfcModel` that the `IfcLoader` generates with `load` and `loadAsync`.

- Through `IfcLoader.IfcManager`.

<IfcAlert>
Both <b>IfcModel</b> instances and <b>IfcLoader.IfcManager</b> can be used interchangeably to access the API. There's one difference: when using <b>IfcModel</b>, the ModelID never has to be given as an argument (it's known implicitly).
</IfcAlert>

##  üß∞ Setup

###  setWasmPath

```js
  IfcLoader.IfcManager.setWasmPath (
                        path: string
                        ): void;
```

  üß†
Specifies the location of the web-ifc.wasm file. This file is the web-ifc file and is required to create any application with IFC.js. You can find it in node_modules/web-ifc/web-ifc.wasm.


<IfcCard icon={"üöß"} title={"Careful with your tooling!"} >
If you use frameworks or libraries like React, Angular, Vue or Svelte it is possible that the root path of the project doesn't correspond to the root path of the served application. You will have to check in <a href="https://github.com/IFCjs/examples">each case</a> how the paths of the statically served files are managed.
</IfcCard>

#### Arguments:

- `path` Route of `web-ifc.wasm`.

#### Example:

If `web-ifc.wasm` is in dist/wasmDir:

```js
  ifcLoader.setWasmPath("dist/wasmDir/");
```

###  setupThreeMeshBVH

```js
  ifcLoader.IfcManager.setupThreeMeshBVH (
                        computeBoundsTree: any,
                        disposeBoundsTree: any,
                        acceleratedRaycast: any
                        ): void;
```

  ‚ö°‚ö°‚ö°
This method allows object picking to be much faster, especially for very large models with heavy geometry. This method actually allows IFC.js to use the Garrett Johnson's amazing [library ](https://github.com/gkjohnson/three-mesh-bvh). u can install it with `npm i three-mesh-bvh` or `yarn add three-mesh-bvh`.

<IfcCard>
  ‚òù
Using this method not mandatory, but if you want to be able to select objects in medium / large IFC models at 60 fps, it's necessary.
</IfcCard>

#### Arguments:

- `computeBoundsTree` Pre-made BufferGeometry extension function that builds a new BVH, assigns it to boundsTree, and applies the new index buffer to the geometry. - [source](https://github.com/gkjohnson/three-mesh-bvh#computeboundstree).

- `disposeBoundsTree` BufferGeometry extension function that disposes of the BVH. - [source](https://github.com/gkjohnson/three-mesh-bvh#disposeboundstree).

- `acceleratedRaycast`  Accelerated raycast function with the same signature as THREE.Mesh.raycast. Uses the BVH for raycasting if it's available otherwise it falls back to the built-in approach. - [source](https://github.com/gkjohnson/three-mesh-bvh#acceleratedraycast).

#### Example:

```js
import {
    IFCLoader
} from 'web-ifc-three/dist/IFCLoader';

import {
    acceleratedRaycast,
    computeBoundsTree,
    disposeBoundsTree
} from 'three-mesh-bvh';

const ifcLoader = new IFCLoader();
ifcLoader.ifcManager.setupThreeMeshBVH(
    acceleratedRaycast,
    computeBoundsTree,
    disposeBoundsTree);
```

##  üîç Getters

###  getExpressId

```js
  IfcLoader.IfcManager.getExpressId (
                        geometry: BufferGeometry,
                        faceIndex: number
                        ): number;
```

  üí≥
Gets the Express ID of an IFC element from a face index.

<IfcCard icon="üìú" title="Why a face index?">
Because when we select an object in 3d space with the mouse we get the index of that face. We usually want the ID of the object where that face belongs to in order to highlight it, isolate it or get all its properties.
</IfcCard>

#### Arguments:

- `geometry` [Geometry](https://threejs.org/docs/#api/en/core/BufferGeometry) of the model you clicked on with the mouse.

- `faceIndex` Index of the face intersected with the [raycaster](https://threejs.org/docs/#api/en/core/Raycaster). If you are not familiar with the raycaster, don't worry; we'll cover this in detail in the tutorial about picking.

#### Example:

```js
  const intersected = raycaster.intersectObject(mesh)[0];
  const index = intersected.faceIndex;
  const id = ifcLoader.ifcManager.getExpressId(mesh, index);
```


###  getIfcType

```js
  IfcLoader.IfcManager.getIfcType (
                        modelID: number,
                        id: number,
                        ): string;
```
üé∏ü™ïüéª
Gets the IFC type of the specified element (e.g. IFCWALL).

<IfcAlert>
Elements in IFC always have an associated type: IfcWall, IfcSlab, IfcWindow, IfcDoor, etc.
</IfcAlert>

#### Arguments:

- `modelID` ID of the IFC model.

- `id` Express ID of the item whose properties to obtain. You can get this either with `getExpressId` (if you are picking an object in the 3d view) or traversing the model with `getAllItemsOfType` or `getSpatialStructure`.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const manager = loader.ifcLoader.ifcManager;
  const type = manager.getIfcType(model, id);
```

###  getAllItemsOfType

```js
  IfcLoader.IfcManager.getAllItemsOfType (
                            modelID: number,
                            type: number,
                            verbose: boolean
                            ): number[] | object[];
```

  üé∏üé∏üé∏
Returns all objects of the specified IFC type (e.g. all walls, all floors, all windows, etc.) of a specific model. It can return an array of `expressIDs`, or (if `verbose = true`) an array of objects containing the properties of the items found.

#### Arguments:

- `modelID` ID of the IFC model.

- `type` IFC type of the elements you want to get. You can import these types directly from `web-ifc` (see example below).

- `verbose` If true, gets the properties of all the items found. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  import { IFCWALLSTANDARDCASE as W } from 'web-ifc';

  const manager = loader.ifcLoader.ifcManager;
  const walls = manager.getAllItemsOfType(0, W, false);
```

###  getItemProperties

```js
  IfcLoader.IfcManager.getItemProperties (
                            modelID: number,
                            id: number,
                            recursive = false
                            ): object[];
```

  üìïüîç
Gets the native properties of the given element. In the IFC schema there are two types of properties: direct and indirect. How to obtain the indirect properties (psets, qsets and type properties) will be discussed later.

<IfcAlert>
All methods related to properties return an array of objects where the keys are the name of the properties and the values are their values.
</IfcAlert>

#### Arguments:

- `modelID` ID of the IFC model.

- `id` Express ID of the item whose properties to obtain. You can get this either with `getExpressId` (if you are picking an object in the 3d view) or traversing the model with `getAllItemsOfType` or `getSpatialStructure`.

- `recursive` If true, gets the properties of all the referenced elements recursively. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const manager = loader.ifcLoader.ifcManager;
  const props = manager.getItemProperties(model, id, false);
```

###  getTypeProperties

```js
  IfcLoader.IfcManager.getTypeProperties (
                            modelID: number,
                            id: number,
                            recursive = false
                            ): number[] | object[];
```
  üìòüîç
Gets the type properties of the given element.

#### Arguments:

- `modelID` ID of the IFC model.

- `id` Express ID of the item whose properties to obtain. You can get this either with `getExpressId` (if you are picking an object in the 3d view) or traversing the model with `getAllItemsOfType` or `getSpatialStructure`.

- `recursive` If true, gets the properties of all the referenced elements recursively. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const manager = loader.ifcLoader.ifcManager;
  const props = manager.getTypeProperties(model, id, false);
```

###  getPropertySets

```js
  IfcLoader.IfcManager.getPropertySets (
                            modelID: number,
                            id: number,
                            recursive = false
                            ): object[];
```

üìóüîç
Gets the property sets and quantity sets of the given element.

<IfcCard icon="üìÉ" title="Property sets?" >
    Native and type properties are those that are predefined by the IFC schema: they always contain the same information. Property sets, on the other hand, are arbitrary and can be defined by the user.
</IfcCard>

#### Arguments:

- `modelID` ID of the IFC model.

- `id` Express ID of the item whose properties to obtain. You can get this either with `getExpressId` (if you are picking an object in the 3d view) or traversing the model with `getAllItemsOfType` or `getSpatialStructure`.

- `recursive` If true, gets the properties of all the referenced elements recursively. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const manager = loader.ifcLoader.ifcManager;
  const props = manager.getPropertySets(model, id, false);
```

###  getMaterialProperties

```js
  IfcLoader.IfcManager.getMaterialProperties (
                            modelID: number,
                            id: number,
                            recursive = false
                            ): object[];
```

üìíüîç
Gets the material information of the given element.

#### Arguments:

- `modelID` ID of the IFC model.

- `id` Express ID of the item whose properties to obtain. You can get this either with `getExpressId` (if you are picking an object in the 3d view) or traversing the model with `getAllItemsOfType` or `getSpatialStructure`.

- `recursive` If true, gets the properties of all the referenced elements recursively. Be careful, as this can be a slow operation in bigger models.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const manager = loader.ifcLoader.ifcManager;
  const props = manager.getMaterialProperties(model, id, false);
```


###  getSpatialStructure

```js
  IfcLoader.IfcManager.getSpatialStructure (
                        modelID: number
                        ): object;
```
  üîóüîóüîó
Gets the spatial structure of the project.

<IfcAlert>
The <a href="https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/schema/ifcproductextension/lexical/ifcspatialstructureelement.htm">spatial structure</a> is the hierarchical structure that organizes every IFC project (all physical items are referenced to an element of the spatial structure).
</IfcAlert>

#### Arguments:

- `modelID` ID of the IFC model.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const manager = loader.ifcLoader.ifcManager;
  const ifcProject = manager.getSpatialStructure(model);
```

##  üß± Subsets

###  getSubset

```js
  IfcLoader.IfcManager.getSubset (
                        modelID: number,
                        material?: Material
                        ): object;
```
  üß±üîç
Gets the mesh of the subset with the specified [material](https://threejs.org/docs/#api/en/materials/Material). If no material is given, this returns the subset with the original materials.

<IfcAlert>
Geometric subsets are extracts of the geometry of the model. For example, you could extract a subset with all the IfcDoors and IfcWindows that meet a certain condition and highlight or export them.
</IfcAlert>

#### Arguments:

- `modelID` ID of the IFC model.

- `material` (optional) Material assigned to the subset (if any).

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const manager = loader.ifcLoader.ifcManager;
  const subset = manager.getSubset(model);
```

###  createSubset

```js
  IfcLoader.IfcManager.createSubset (
                        config: HighlightConfigOfModel
                        ): object;
```
üß±‚ú®
Creates a new geometric subset.

#### Arguments:

- `config` A configuration object with the following options:

  - `scene` Scene where the model is located.

  - `modelID` ID of the model.

  - `ids` Express IDs of the items of the model that will conform the subset.

  - `removePrevious` Wether to remove the previous subset of this model with this material.

  - `material` (optional) Material to apply to the subset. If no material is given, the subset has the original material.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const manager = loader.ifcLoader.ifcManager;
  const config = {
        modelID: model
        scene: scene,
        ids: [id],
        removePrevious: true
  }
  manager.createSubset(config);
```

###  removeSubset

```js
  IfcLoader.IfcManager.removeSubset (
                        modelID: number,
                        scene?: Scene,
                        material?: Material
                        ): object;
```

  üß±üí£
Removes the specified geometric subset.

#### Arguments:

- `modelID` ID of the IFC model.

- `scene` (optional) Scene where the subset is located.

- `material` (optional) Material assigned to the subset (if any).

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const manager = loader.ifcLoader.ifcManager;
  manager.removeSubset(model);
```

##  üëì Visibility

###  hideItems

```js
  IfcLoader.IfcManager.hideItems (
                        modelID: number,
                        ids: number[]
                        ): void;
```

  üåí
Hides the selected items in the specified model.

#### Arguments:

- `modelID` ID of the IFC model.

- `ids` Express ID of the elements.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const manager = loader.ifcLoader.ifcManager;
  manager.hideItems(model, [id]);
```

###  hideAllItems

```js
  IfcLoader.IfcManager.hideAllItems (
                        modelID: number
                        ): void;
```

  üåíüåíüåí
Hides all the items of the specified model.

#### Arguments:

- `modelID` ID of the IFC model.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const manager = loader.ifcLoader.ifcManager;
  manager.hideAllItems(model);
```

###  showItems

```js
  IfcLoader.IfcManager.showItems(
                        modelID: number,
                        ids: number[]
                        ): void;
```

  üåñ
Shows the selected items in the specified model.

#### Arguments:

- `modelID` ID of the IFC model.

- `ids` Express ID of the elements.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const id = 2142;
  const manager = loader.ifcLoader.ifcManager;
  manager.showItems(model, [id]);
```

###  showAllItems

```js
  IfcLoader.IfcManager.showAllItems(
                        modelID: number
                        ): void;
```

  üåñüåñüåñ
Shows all the items of the specified model.

#### Arguments:

- `modelID` ID of the IFC model.

#### Example:

```js
  const model = ifcModel.mesh.modelID;
  const manager = loader.ifcLoader.ifcManager;
  manager.showAllItems(model);
```
